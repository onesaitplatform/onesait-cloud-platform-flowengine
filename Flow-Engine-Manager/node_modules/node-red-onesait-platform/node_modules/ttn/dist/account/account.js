"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.AccountClient = undefined;

var _regenerator = require("babel-runtime/regenerator");

var _regenerator2 = _interopRequireDefault(_regenerator);

var _stringify = require("babel-runtime/core-js/json/stringify");

var _stringify2 = _interopRequireDefault(_stringify);

var _asyncToGenerator2 = require("babel-runtime/helpers/asyncToGenerator");

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _classCallCheck2 = require("babel-runtime/helpers/classCallCheck");

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require("babel-runtime/helpers/createClass");

var _createClass3 = _interopRequireDefault(_createClass2);

var _sourceMapSupport2 = require("source-map-support");

var _nodeFetch = require("node-fetch");

var _nodeFetch2 = _interopRequireDefault(_nodeFetch);

var _utils = require("../utils");

var _isToken = require("../utils/is-token");

var _isToken2 = _interopRequireDefault(_isToken);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _sourceMapSupport2.install)(); // Copyright Â© 2017 The Things Network
// Use of this source code is governed by the MIT license that can be found in the LICENSE file.

// Necessary to make gRPC work
process.env.GRPC_SSL_CIPHER_SUITES = _utils.MODERN_CIPHER_SUITES;

/**
 * `Account` is a client for The Things Network account server API.
 * It can be used to manage applications and their EUIs, as well as gateways.
 * Either a Bearer Token or an Application Access Key can be used for
 * authentication. The latter method allows to use the `getApplication()`
 * function only.
 *
 * Example:
 * ```
 * const account = new Account("accesKeyOrToken", "https://customserveradress.org")
 * ```
 */

var AccountClient = exports.AccountClient = function () {
  /** @private */
  function AccountClient(accessKeyOrToken) {
    var serverAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "https://account.thethingsnetwork.org";
    (0, _classCallCheck3.default)(this, AccountClient);

    this.authHeader = (0, _isToken2.default)(accessKeyOrToken) ? "Bearer " + accessKeyOrToken : "Key " + accessKeyOrToken;

    this.serverAddress = serverAddress;
  }

  /** @private */


  /** @private */


  (0, _createClass3.default)(AccountClient, [{
    key: "makeRequest",
    value: function () {
      var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(url) {
        var method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "GET";
        var body = arguments[2];
        var res;
        return _regenerator2.default.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _nodeFetch2.default)(this.serverAddress + "/" + url, {
                  method: method,
                  body: (0, _stringify2.default)(body),
                  headers: {
                    authorization: this.authHeader,
                    "content-type": "application/json"
                  }
                });

              case 2:
                res = _context.sent;

                if (!(res.status >= 400)) {
                  _context.next = 5;
                  break;
                }

                throw new Error(res.status + " " + res.statusText);

              case 5:
                return _context.abrupt("return", res.json());

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function makeRequest(_x2) {
        return _ref.apply(this, arguments);
      }

      return makeRequest;
    }()

    /**
     * Gets metadata about all applications that are accessible with
     * the given accessToken
     */

  }, {
    key: "getAllApplications",
    value: function getAllApplications() {
      return this.makeRequest("applications");
    }

    /**
     * Gets the information that is stored about a given application.
     * This includes the EUIs, name access keys, collaborators.
     * The properties that can be retrieved depend on the rights of
     * the used authorization mechanism.
     */

  }, {
    key: "getApplication",
    value: function getApplication(appID) {
      return this.makeRequest("applications/" + appID);
    }

    /**
     * Creates a new application on the account server.
     */

  }, {
    key: "createApplication",
    value: function createApplication(app) {
      return this.makeRequest("applications", "POST", app);
    }

    /**
     * Removes an application from the account server.
     */

  }, {
    key: "deleteApplication",
    value: function deleteApplication(appID) {
      return this.makeRequest("applications/" + appID, "DELETE");
    }

    /**
     * Adds a collaborator with a set of access rights to the given application.
     */

  }, {
    key: "addCollaborator",
    value: function addCollaborator(appID, collaborator, rights) {
      return this.makeRequest("applications/" + appID + "/collaborators/" + collaborator, "PUT", rights);
    }

    /**
     * Removes a collaborator by her username from an application
     */

  }, {
    key: "deleteCollaborator",
    value: function deleteCollaborator(appID, collaborator) {
      return this.makeRequest("applications/" + appID + "/collaborators/" + collaborator, "DELETE");
    }

    /**
     * Adds an EUI to the given application. Must be hexadecimal with a length of 16.
     */

  }, {
    key: "addEUI",
    value: function addEUI(appID, eui) {
      return this.makeRequest("applications/" + appID + "/euis/" + eui, "PUT");
    }

    /**
     * Removes an EUI from the given application.
     */

  }, {
    key: "deleteEUI",
    value: function deleteEUI(appID, eui) {
      return this.makeRequest("applications/" + appID + "/euis/" + eui, "DELETE");
    }
  }]);
  return AccountClient;
}();

/**
 * AppAccessRights
 */


/**
 * The minimal payload for to the POST /applications route
 * of the account server
 */


/**
 * AccountApplication contains the metadata of an application
 * returned by the account server. Presence of optional fields
 * depends on the [access rights](#appaccessrights) of the used accessKey / -token.
 */
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hY2NvdW50L2FjY291bnQuanMiXSwibmFtZXMiOlsicHJvY2VzcyIsImVudiIsIkdSUENfU1NMX0NJUEhFUl9TVUlURVMiLCJBY2NvdW50Q2xpZW50IiwiYWNjZXNzS2V5T3JUb2tlbiIsInNlcnZlckFkZHJlc3MiLCJhdXRoSGVhZGVyIiwidXJsIiwibWV0aG9kIiwiYm9keSIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwicmVzIiwic3RhdHVzIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwianNvbiIsIm1ha2VSZXF1ZXN0IiwiYXBwSUQiLCJhcHAiLCJjb2xsYWJvcmF0b3IiLCJyaWdodHMiLCJldWkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS0E7Ozs7QUFFQTs7QUFDQTs7Ozs7O21DQVJBO0FBQ0E7O0FBU0E7QUFDQUEsUUFBUUMsR0FBUixDQUFZQyxzQkFBWjs7QUFFQTs7Ozs7Ozs7Ozs7OztJQVlhQyxhLFdBQUFBLGE7QUFDWDtBQU1BLHlCQUFhQyxnQkFBYixFQUFnSDtBQUFBLFFBQXhFQyxhQUF3RSx1RUFBL0Msc0NBQStDO0FBQUE7O0FBQzlHLFNBQUtDLFVBQUwsR0FBa0IsdUJBQVFGLGdCQUFSLGdCQUNKQSxnQkFESSxZQUVQQSxnQkFGWDs7QUFJQSxTQUFLQyxhQUFMLEdBQXFCQSxhQUFyQjtBQUNEOztBQUVEOzs7QUFYQTs7Ozs7OzZGQVltQkUsRztZQUFjQyxNLHVFQUFrQixLO1lBQU9DLEk7Ozs7Ozs7dUJBQ3RDLHlCQUFTLEtBQUtKLGFBQWQsU0FBK0JFLEdBQS9CLEVBQXNDO0FBQ3REQyxnQ0FEc0Q7QUFFdERDLHdCQUFNLHlCQUFlQSxJQUFmLENBRmdEO0FBR3REQywyQkFBUztBQUNQQyxtQ0FBZSxLQUFLTCxVQURiO0FBRVAsb0NBQWdCO0FBRlQ7QUFINkMsaUJBQXRDLEM7OztBQUFaTSxtQjs7c0JBU0ZBLElBQUlDLE1BQUosSUFBYyxHOzs7OztzQkFDVixJQUFJQyxLQUFKLENBQWFGLElBQUlDLE1BQWpCLFNBQTJCRCxJQUFJRyxVQUEvQixDOzs7aURBR0RILElBQUlJLElBQUosRTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHVDs7Ozs7Ozt5Q0FJMkQ7QUFDekQsYUFBTyxLQUFLQyxXQUFMLENBQWlCLGNBQWpCLENBQVA7QUFDRDs7QUFFRDs7Ozs7Ozs7O21DQU1nQkMsSyxFQUE4QztBQUM1RCxhQUFPLEtBQUtELFdBQUwsbUJBQWlDQyxLQUFqQyxDQUFQO0FBQ0Q7O0FBRUQ7Ozs7OztzQ0FHbUJDLEcsRUFBNEM7QUFDN0QsYUFBTyxLQUFLRixXQUFMLENBQWlCLGNBQWpCLEVBQWlDLE1BQWpDLEVBQXlDRSxHQUF6QyxDQUFQO0FBQ0Q7O0FBRUQ7Ozs7OztzQ0FHbUJELEssRUFBK0I7QUFDaEQsYUFBTyxLQUFLRCxXQUFMLG1CQUFpQ0MsS0FBakMsRUFBMEMsUUFBMUMsQ0FBUDtBQUNEOztBQUVEOzs7Ozs7b0NBR2lCQSxLLEVBQWdCRSxZLEVBQXVCQyxNLEVBQWdEO0FBQ3RHLGFBQU8sS0FBS0osV0FBTCxtQkFBaUNDLEtBQWpDLHVCQUF3REUsWUFBeEQsRUFBd0UsS0FBeEUsRUFBK0VDLE1BQS9FLENBQVA7QUFDRDs7QUFFRDs7Ozs7O3VDQUdvQkgsSyxFQUFnQkUsWSxFQUFzQztBQUN4RSxhQUFPLEtBQUtILFdBQUwsbUJBQWlDQyxLQUFqQyx1QkFBd0RFLFlBQXhELEVBQXdFLFFBQXhFLENBQVA7QUFDRDs7QUFFRDs7Ozs7OzJCQUdRRixLLEVBQWdCSSxHLEVBQTZCO0FBQ25ELGFBQU8sS0FBS0wsV0FBTCxtQkFBaUNDLEtBQWpDLGNBQStDSSxHQUEvQyxFQUFzRCxLQUF0RCxDQUFQO0FBQ0Q7O0FBRUQ7Ozs7Ozs4QkFHV0osSyxFQUFnQkksRyxFQUE2QjtBQUN0RCxhQUFPLEtBQUtMLFdBQUwsbUJBQWlDQyxLQUFqQyxjQUErQ0ksR0FBL0MsRUFBc0QsUUFBdEQsQ0FBUDtBQUNEOzs7OztBQUdIOzs7OztBQVdBOzs7Ozs7QUFTQSIsImZpbGUiOiJhY2NvdW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IMKpIDIwMTcgVGhlIFRoaW5ncyBOZXR3b3JrXG4vLyBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSB0aGUgTUlUIGxpY2Vuc2UgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZS5cblxuLy8gQGZsb3dcblxuaW1wb3J0IGZldGNoIGZyb20gXCJub2RlLWZldGNoXCJcblxuaW1wb3J0IHsgTU9ERVJOX0NJUEhFUl9TVUlURVMgfSBmcm9tIFwiLi4vdXRpbHNcIlxuaW1wb3J0IGlzVG9rZW4gZnJvbSBcIi4uL3V0aWxzL2lzLXRva2VuXCJcblxuLy8gTmVjZXNzYXJ5IHRvIG1ha2UgZ1JQQyB3b3JrXG5wcm9jZXNzLmVudi5HUlBDX1NTTF9DSVBIRVJfU1VJVEVTID0gTU9ERVJOX0NJUEhFUl9TVUlURVNcblxuLyoqXG4gKiBgQWNjb3VudGAgaXMgYSBjbGllbnQgZm9yIFRoZSBUaGluZ3MgTmV0d29yayBhY2NvdW50IHNlcnZlciBBUEkuXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBtYW5hZ2UgYXBwbGljYXRpb25zIGFuZCB0aGVpciBFVUlzLCBhcyB3ZWxsIGFzIGdhdGV3YXlzLlxuICogRWl0aGVyIGEgQmVhcmVyIFRva2VuIG9yIGFuIEFwcGxpY2F0aW9uIEFjY2VzcyBLZXkgY2FuIGJlIHVzZWQgZm9yXG4gKiBhdXRoZW50aWNhdGlvbi4gVGhlIGxhdHRlciBtZXRob2QgYWxsb3dzIHRvIHVzZSB0aGUgYGdldEFwcGxpY2F0aW9uKClgXG4gKiBmdW5jdGlvbiBvbmx5LlxuICpcbiAqIEV4YW1wbGU6XG4gKiBgYGBcbiAqIGNvbnN0IGFjY291bnQgPSBuZXcgQWNjb3VudChcImFjY2VzS2V5T3JUb2tlblwiLCBcImh0dHBzOi8vY3VzdG9tc2VydmVyYWRyZXNzLm9yZ1wiKVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2NvdW50Q2xpZW50IHtcbiAgLyoqIEBwcml2YXRlICovXG4gIGF1dGhIZWFkZXIgOiBzdHJpbmdcblxuICAvKiogQHByaXZhdGUgKi9cbiAgc2VydmVyQWRkcmVzczogc3RyaW5nXG5cbiAgY29uc3RydWN0b3IgKGFjY2Vzc0tleU9yVG9rZW4gOiBzdHJpbmcsIHNlcnZlckFkZHJlc3MgOiBzdHJpbmcgPSBcImh0dHBzOi8vYWNjb3VudC50aGV0aGluZ3NuZXR3b3JrLm9yZ1wiKSA6IHZvaWQge1xuICAgIHRoaXMuYXV0aEhlYWRlciA9IGlzVG9rZW4oYWNjZXNzS2V5T3JUb2tlbilcbiAgICAgID8gYEJlYXJlciAke2FjY2Vzc0tleU9yVG9rZW59YFxuICAgICAgOiBgS2V5ICR7YWNjZXNzS2V5T3JUb2tlbn1gXG5cbiAgICB0aGlzLnNlcnZlckFkZHJlc3MgPSBzZXJ2ZXJBZGRyZXNzXG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgYXN5bmMgbWFrZVJlcXVlc3QgKHVybCA6IHN0cmluZywgbWV0aG9kIDogc3RyaW5nID0gXCJHRVRcIiwgYm9keSA6ID9hbnkpIDogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLnNlcnZlckFkZHJlc3N9LyR7dXJsfWAsIHtcbiAgICAgIG1ldGhvZCxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmF1dGhIZWFkZXIsXG4gICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgaWYgKHJlcy5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKVxuICAgIH1cblxuICAgIHJldHVybiByZXMuanNvbigpXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBtZXRhZGF0YSBhYm91dCBhbGwgYXBwbGljYXRpb25zIHRoYXQgYXJlIGFjY2Vzc2libGUgd2l0aFxuICAgKiB0aGUgZ2l2ZW4gYWNjZXNzVG9rZW5cbiAgICovXG4gIGdldEFsbEFwcGxpY2F0aW9ucyAoKSA6IFByb21pc2U8QXJyYXk8QWNjb3VudEFwcGxpY2F0aW9uPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KFwiYXBwbGljYXRpb25zXCIpXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdG9yZWQgYWJvdXQgYSBnaXZlbiBhcHBsaWNhdGlvbi5cbiAgICogVGhpcyBpbmNsdWRlcyB0aGUgRVVJcywgbmFtZSBhY2Nlc3Mga2V5cywgY29sbGFib3JhdG9ycy5cbiAgICogVGhlIHByb3BlcnRpZXMgdGhhdCBjYW4gYmUgcmV0cmlldmVkIGRlcGVuZCBvbiB0aGUgcmlnaHRzIG9mXG4gICAqIHRoZSB1c2VkIGF1dGhvcml6YXRpb24gbWVjaGFuaXNtLlxuICAgKi9cbiAgZ2V0QXBwbGljYXRpb24gKGFwcElEIDogc3RyaW5nKSA6IFByb21pc2U8QWNjb3VudEFwcGxpY2F0aW9uPiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoYGFwcGxpY2F0aW9ucy8ke2FwcElEfWApXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBhcHBsaWNhdGlvbiBvbiB0aGUgYWNjb3VudCBzZXJ2ZXIuXG4gICAqL1xuICBjcmVhdGVBcHBsaWNhdGlvbiAoYXBwIDogTWluaW1hbEFjY0FwcGxpY2F0aW9uKSA6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoXCJhcHBsaWNhdGlvbnNcIiwgXCJQT1NUXCIsIGFwcClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFuIGFwcGxpY2F0aW9uIGZyb20gdGhlIGFjY291bnQgc2VydmVyLlxuICAgKi9cbiAgZGVsZXRlQXBwbGljYXRpb24gKGFwcElEIDogc3RyaW5nKSA6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoYGFwcGxpY2F0aW9ucy8ke2FwcElEfWAsIFwiREVMRVRFXCIpXG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGNvbGxhYm9yYXRvciB3aXRoIGEgc2V0IG9mIGFjY2VzcyByaWdodHMgdG8gdGhlIGdpdmVuIGFwcGxpY2F0aW9uLlxuICAgKi9cbiAgYWRkQ29sbGFib3JhdG9yIChhcHBJRCA6IHN0cmluZywgY29sbGFib3JhdG9yIDogc3RyaW5nLCByaWdodHMgOiBBcnJheTxBcHBBY2Nlc3NSaWdodHM+KSA6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoYGFwcGxpY2F0aW9ucy8ke2FwcElEfS9jb2xsYWJvcmF0b3JzLyR7Y29sbGFib3JhdG9yfWAsIFwiUFVUXCIsIHJpZ2h0cylcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgY29sbGFib3JhdG9yIGJ5IGhlciB1c2VybmFtZSBmcm9tIGFuIGFwcGxpY2F0aW9uXG4gICAqL1xuICBkZWxldGVDb2xsYWJvcmF0b3IgKGFwcElEIDogc3RyaW5nLCBjb2xsYWJvcmF0b3IgOiBzdHJpbmcpIDogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdChgYXBwbGljYXRpb25zLyR7YXBwSUR9L2NvbGxhYm9yYXRvcnMvJHtjb2xsYWJvcmF0b3J9YCwgXCJERUxFVEVcIilcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGFuIEVVSSB0byB0aGUgZ2l2ZW4gYXBwbGljYXRpb24uIE11c3QgYmUgaGV4YWRlY2ltYWwgd2l0aCBhIGxlbmd0aCBvZiAxNi5cbiAgICovXG4gIGFkZEVVSSAoYXBwSUQgOiBzdHJpbmcsIGV1aSA6IHN0cmluZykgOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KGBhcHBsaWNhdGlvbnMvJHthcHBJRH0vZXVpcy8ke2V1aX1gLCBcIlBVVFwiKVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYW4gRVVJIGZyb20gdGhlIGdpdmVuIGFwcGxpY2F0aW9uLlxuICAgKi9cbiAgZGVsZXRlRVVJIChhcHBJRCA6IHN0cmluZywgZXVpIDogc3RyaW5nKSA6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoYGFwcGxpY2F0aW9ucy8ke2FwcElEfS9ldWlzLyR7ZXVpfWAsIFwiREVMRVRFXCIpXG4gIH1cbn1cblxuLyoqXG4gKiBBcHBBY2Nlc3NSaWdodHNcbiAqL1xudHlwZSBBcHBBY2Nlc3NSaWdodHMgPSBcInNldHRpbmdzXCJcbiAgfCBcImRlbGV0ZVwiXG4gIHwgXCJjb2xsYWJvcmF0b3JzXCJcbiAgfCBcImRldmljZXNcIlxuICB8IFwibWVzc2FnZXM6dXA6clwiXG4gIHwgXCJtZXNzYWdlczp1cDp3XCJcbiAgfCBcIm1lc3NhZ2VzOmRvd246d1wiXG5cbi8qKlxuICogVGhlIG1pbmltYWwgcGF5bG9hZCBmb3IgdG8gdGhlIFBPU1QgL2FwcGxpY2F0aW9ucyByb3V0ZVxuICogb2YgdGhlIGFjY291bnQgc2VydmVyXG4gKi9cbnR5cGUgTWluaW1hbEFjY0FwcGxpY2F0aW9uID0ge1xuICBpZDogc3RyaW5nLFxuICBuYW1lOiBzdHJpbmcsXG59XG5cbi8qKlxuICogQWNjb3VudEFwcGxpY2F0aW9uIGNvbnRhaW5zIHRoZSBtZXRhZGF0YSBvZiBhbiBhcHBsaWNhdGlvblxuICogcmV0dXJuZWQgYnkgdGhlIGFjY291bnQgc2VydmVyLiBQcmVzZW5jZSBvZiBvcHRpb25hbCBmaWVsZHNcbiAqIGRlcGVuZHMgb24gdGhlIFthY2Nlc3MgcmlnaHRzXSgjYXBwYWNjZXNzcmlnaHRzKSBvZiB0aGUgdXNlZCBhY2Nlc3NLZXkgLyAtdG9rZW4uXG4gKi9cbnR5cGUgQWNjb3VudEFwcGxpY2F0aW9uID0gTWluaW1hbEFjY0FwcGxpY2F0aW9uICYge1xuICBldWlzOiBBcnJheTxzdHJpbmc+LFxuICBjcmVhdGVkOiBzdHJpbmcsXG4gIHJpZ2h0czogQXJyYXk8c3RyaW5nPixcbiAgY29sbGFib3JhdG9ycz86IEFycmF5PHtcbiAgICB1c2VybmFtZTogc3RyaW5nLFxuICAgIGVtYWlsOiBzdHJpbmcsXG4gICAgcmlnaHRzOiBBcnJheTxzdHJpbmc+LFxuICB9PixcbiAgYWNjZXNzX2tleXM/OiBBcnJheTx7XG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGtleTogc3RyaW5nLFxuICAgIHJpZ2h0czogQXJyYXk8c3RyaW5nPixcbiAgfT4sXG4gIGRlbGV0ZWQ/OiBzdHJpbmdcbn1cbiJdfQ==